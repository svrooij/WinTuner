using Microsoft.Extensions.Logging;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using WingetIntune.Internal.MsStore;

namespace WingetIntune.Tests.MsStore;
public class MicrosoftStoreClientTests
{
    [Fact]
    public async Task GetDisplayCatalogAsync_ReturnsExpectedResult()
    {
        const string packageId = "9NZVDKPMR9RD";
        const string responseData = @"{""Products"":[{""LastModifiedDate"":""2024-04-30T14:41:13.2369856Z"",""LocalizedProperties"":[{""DeveloperName"":"""",""DisplayPlatformProperties"":null,""PublisherName"":""Mozilla"",""PublisherAddress"":null,""PublisherWebsiteUri"":""https://www.mozilla.org/firefox/"",""SupportUri"":""https://support.mozilla.org/products/firefox"",""SupportPhone"":null,""EligibilityProperties"":null,""Franchises"":[],""Images"":[{""FileId"":""3071430996971663174"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":14069,""ForegroundColor"":"""",""Height"":100,""ImagePositionInfo"":"""",""ImagePurpose"":""Logo"",""UnscaledImageSHA256Hash"":""NmfuVtG1XGBx/p8HUht9J+giOGcMN5oIea7M4xjN/H8="",""Uri"":""//store-images.s-microsoft.com/image/apps.26422.14473293538384797.ed62a13f-c9ba-478e-9f33-7fd3515b0820.37a70641-3de3-41b1-9c94-3cb0cfc663c2"",""Width"":100},{""FileId"":""3004232197050559163"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":63556,""ForegroundColor"":"""",""Height"":300,""ImagePositionInfo"":"""",""ImagePurpose"":""Tile"",""UnscaledImageSHA256Hash"":""S5CO1XDVz6JpQlsSlJWWEN45hRkKGDwyapmRK6A66qA="",""Uri"":""//store-images.s-microsoft.com/image/apps.36939.14473293538384797.0ec149d2-d2b5-48a8-afd4-66986d387ec9.820a68fb-12dd-45a1-9a5a-1f141fc93f29"",""Width"":300},{""FileId"":""3008762446945936351"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":7710,""ForegroundColor"":"""",""Height"":88,""ImagePositionInfo"":"""",""ImagePurpose"":""Tile"",""UnscaledImageSHA256Hash"":""9z/FtCO6NlcynHvQQ6gvOoXTw/h8ZUzdrOxMg+QMt2Q="",""Uri"":""//store-images.s-microsoft.com/image/apps.16375.14473293538384797.ed62a13f-c9ba-478e-9f33-7fd3515b0820.a6fb32ca-2223-41dc-8d73-8395066b1c4f"",""Width"":88},{""FileId"":""3052106644741011285"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":187605,""ForegroundColor"":"""",""Height"":620,""ImagePositionInfo"":"""",""ImagePurpose"":""Tile"",""UnscaledImageSHA256Hash"":""6gpjyrwSRgQ9Fa4NbghXdgJsrO/cs7vxFM+Y/mkBCDg="",""Uri"":""//store-images.s-microsoft.com/image/apps.2794.14473293538384797.0ec149d2-d2b5-48a8-afd4-66986d387ec9.5a7e12ea-3baa-41de-ae7c-e58c7d22b644"",""Width"":620},{""FileId"":""3031096784199183752"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":8923,""ForegroundColor"":"""",""Height"":142,""ImagePositionInfo"":"""",""ImagePurpose"":""Tile"",""UnscaledImageSHA256Hash"":""dhSnfnKPaSBBYSgcsMpkSPeuawH/9ZSKTZE3LW+hpNM="",""Uri"":""//store-images.s-microsoft.com/image/apps.5238.14473293538384797.ed62a13f-c9ba-478e-9f33-7fd3515b0820.13c8d648-665d-4185-8b32-beb922c3a9d1"",""Width"":142},{""FileId"":""3028587524167049996"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":17159,""ForegroundColor"":"""",""Height"":300,""ImagePositionInfo"":"""",""ImagePurpose"":""Tile"",""UnscaledImageSHA256Hash"":""AjdCKOV39U/zZ91jWgO3Uc0gJy8DZ4tNs46DxTrPoPs="",""Uri"":""//store-images.s-microsoft.com/image/apps.14082.14473293538384797.ed62a13f-c9ba-478e-9f33-7fd3515b0820.abebba2b-9232-4dc4-a59c-0ded036614e4"",""Width"":620},{""FileId"":""3000180573878009204"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":2219458,""ForegroundColor"":"""",""Height"":2160,""ImagePositionInfo"":""Desktop/0"",""ImagePurpose"":""Screenshot"",""UnscaledImageSHA256Hash"":""We95BmfhVSMei0EwA/W2IN8vfUIrIE1KxMRNl/bNpu0="",""Uri"":""//store-images.s-microsoft.com/image/apps.61273.14473293538384797.38906001-683a-40ba-aa5d-ca1c71126f40.836cb591-5b2e-480c-abe0-fbef3445148c"",""Width"":3840},{""FileId"":""3001975626805331357"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":1142645,""ForegroundColor"":"""",""Height"":2160,""ImagePositionInfo"":""Desktop/1"",""ImagePurpose"":""Screenshot"",""UnscaledImageSHA256Hash"":""RxzoePoLqML4h7d/kM4yqb0vbQQRd+mK+uOyI5S0814="",""Uri"":""//store-images.s-microsoft.com/image/apps.7239.14473293538384797.38906001-683a-40ba-aa5d-ca1c71126f40.2836ec17-3608-4c59-955b-e33a4ddbe09a"",""Width"":3840},{""FileId"":""3051311566860831267"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":1435423,""ForegroundColor"":"""",""Height"":2160,""ImagePositionInfo"":""Desktop/2"",""ImagePurpose"":""Screenshot"",""UnscaledImageSHA256Hash"":""sf+mRDniEBQEybyQg3H2FJ+YDSdRD79bK2ZjQARm9Tc="",""Uri"":""//store-images.s-microsoft.com/image/apps.65457.14473293538384797.c7c6f980-349e-4aec-8b21-c9a6aba30011.325858ad-e348-4660-95b8-d2f66200e3fc"",""Width"":3840},{""FileId"":""3048171808590640430"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":2744619,""ForegroundColor"":"""",""Height"":2160,""ImagePositionInfo"":""Desktop/3"",""ImagePurpose"":""Screenshot"",""UnscaledImageSHA256Hash"":""NeoziSi4gk+vLi5eIcXPS03Cq1hY5u8xGMAohxBXA54="",""Uri"":""//store-images.s-microsoft.com/image/apps.59957.14473293538384797.38906001-683a-40ba-aa5d-ca1c71126f40.7cf8905f-6469-422f-8aed-c9bc151a97c4"",""Width"":3840},{""FileId"":""3008914828876618251"",""EISListingIdentifier"":null,""BackgroundColor"":""#20123A"",""Caption"":"""",""FileSizeInBytes"":881119,""ForegroundColor"":"""",""Height"":2160,""ImagePositionInfo"":""Desktop/4"",""ImagePurpose"":""Screenshot"",""UnscaledImageSHA256Hash"":""Xt+ESkKx6rAGAqMWPrfv+myQvniyCYFJnWFinDlk6g8="",""Uri"":""//store-images.s-microsoft.com/image/apps.57182.14473293538384797.38906001-683a-40ba-aa5d-ca1c71126f40.b1631027-7eff-4a82-b06f-956df2b0f6f8"",""Width"":3840}],""Videos"":[],""ProductDescription"":""Firefox Browser: fast, private & safe web browser\r\n\r\nWhen it comes to your life online, you have a choice: accept the factory settings or put your privacy first. When you choose Firefox for Windows as your default browser, you’re choosing to protect your data while supporting an independent tech company. Firefox is also the only major browser backed by a non-profit fighting to give you more openness, transparency and control of your life online. Join hundreds of millions of people who choose to protect what's important by choosing Firefox - a web browser designed to be fast, easy to use, customizable and private.\r\n\r\nA BROWSER THAT REFLECTS WHO YOU ARE \r\n- You can choose whatever default browser you want. Maybe think about using the only super-fast, ultra-private browser that’s backed by a non-profit? No pressure though.\r\n- Our secret sauce: Firefox Add-ons. They’re like these magical power-ups you can add to your Firefox browser to make it even better.\r\n- From watching a web tutorial to keeping an eye on your favorite team, your video follows you while you multitask with Picture-in-Picture.\r\n\r\nFAST. PRIVATE. SAFE.\r\nFirefox browser gives you effortless privacy protection with lightning-fast page loads. Enhanced Tracking Protection automatically blocks over 2,000 known online trackers from invading your privacy and slowing down your webpages. Firefox browser also introduces a clean new design that makes it easier to get more things done, more quickly. Plus, with smart browsing features built in, Firefox lets you take your privacy, passwords, and bookmarks with you safely wherever you go.\r\n\r\nYOU COME FIRST\r\nAs the internet grows and changes, Firefox continues to focus on your right to privacy — we call it the Personal Data Promise: Take less. Keep it safe. No secrets. Your data, your web activity, your life online is protected with Firefox.\r\n\r\nHOW FIREFOX COMPARES TO OTHER BROWSERS\r\nWhen it comes to all-around performance — speed, design, utility, ease of use, and a steadfast commitment to your privacy — no browser beats Firefox. And being backed by a non-profit means that unlike other browsers, we have no financial stake in following you around the web.\r\n\r\nPICK UP RIGHT WHERE YOU LEFT OFF\r\nStart using Firefox on your phone then switch to the Firefox browser on your computer. With Firefox across your devices you can take your bookmarks, saved logins and browsing history wherever you go. Firefox browser also takes the guesswork out of passwords by remembering your passwords across devices.\r\n\r\nKEEP FACEBOOK OFF YOUR BACK\r\nBuilt for Firefox, the Facebook Container extension helps to stop Facebook from collecting your personal data and web activity when you’re outside of Facebook — yes, they’re actually doing this.\r\n\r\nYOUR SAVE BUTTON FOR THE INTERNET\r\nHit the Pocket button when you come across an interesting article, video, recipe — you know, the good stuff on the internet — but just don’t have the time. Pocket stashes it in your own private, distraction-free space to dive into later.\r\n\r\nMULTITASKING MADE EASY\r\nPlay a video in a separate, scalable window that pins to the front of your desktop with the Picture-in-Picture feature. It stays and plays while you go about your other business on other tabs or do things outside of Firefox. \r\n\r\nEXTENSIONS FOR EVERY INTEREST\r\nFrom security to news to gaming, there’s an extension for everyone. Add as many as you want until your browser is just right.\r\n\r\nCHALLENGING THE STATUS QUO SINCE 1998\r\nFirefox was created by Mozilla as a faster, more private alternative to browsers like Microsoft Edge and Google Chrome. Our mission-driven company and volunteer community continue to put your privacy above all else."",""ProductTitle"":""Mozilla Firefox"",""ShortTitle"":""Firefox"",""SortTitle"":"""",""FriendlyTitle"":null,""ShortDescription"":"""",""SearchTitles"":[],""VoiceTitle"":"""",""RenderGroupDetails"":null,""ProductDisplayRanks"":[],""InteractiveModelConfig"":null,""Interactive3DEnabled"":false,""Language"":""en-us"",""Markets"":[""US"",""DZ"",""AR"",""AU"",""AT"",""BH"",""BD"",""BE"",""BR"",""BG"",""CA"",""CL"",""CN"",""CO"",""CR"",""HR"",""CY"",""CZ"",""DK"",""EG"",""EE"",""FI"",""FR"",""DE"",""GR"",""GT"",""HK"",""HU"",""IS"",""IN"",""ID"",""IQ"",""IE"",""IL"",""IT"",""JP"",""JO"",""KZ"",""KE"",""KW"",""LV"",""LB"",""LI"",""LT"",""LU"",""MY"",""MT"",""MR"",""MX"",""MA"",""NL"",""NZ"",""NG"",""NO"",""OM"",""PK"",""PE"",""PH"",""PL"",""PT"",""QA"",""RO"",""RU"",""SA"",""RS"",""SG"",""SK"",""SI"",""ZA"",""KR"",""ES"",""SE"",""CH"",""TW"",""TH"",""TT"",""TN"",""TR"",""UA"",""AE"",""GB"",""VN"",""YE"",""LY"",""LK"",""UY"",""VE"",""AF"",""AX"",""AL"",""AS"",""AO"",""AI"",""AQ"",""AG"",""AM"",""AW"",""BO"",""BQ"",""BA"",""BW"",""BV"",""IO"",""BN"",""BF"",""BI"",""KH"",""CM"",""CV"",""KY"",""CF"",""TD"",""TL"",""DJ"",""DM"",""DO"",""EC"",""SV"",""GQ"",""ER"",""ET"",""FK"",""FO"",""FJ"",""GF"",""PF"",""TF"",""GA"",""GM"",""GE"",""GH"",""GI"",""GL"",""GD"",""GP"",""GU"",""GG"",""GN"",""GW"",""GY"",""HT"",""HM"",""HN"",""AZ"",""BS"",""BB"",""BY"",""BZ"",""BJ"",""BM"",""BT"",""KM"",""CG"",""CD"",""CK"",""CX"",""CC"",""CI"",""CW"",""JM"",""SJ"",""JE"",""KI"",""KG"",""LA"",""LS"",""LR"",""MO"",""MK"",""MG"",""MW"",""IM"",""MH"",""MQ"",""MU"",""YT"",""FM"",""MD"",""MN"",""MS"",""MZ"",""MM"",""NA"",""NR"",""NP"",""MV"",""ML"",""NC"",""NI"",""NE"",""NU"",""NF"",""PW"",""PS"",""PA"",""PG"",""PY"",""RE"",""RW"",""BL"",""MF"",""WS"",""ST"",""SN"",""MP"",""PN"",""SX"",""SB"",""SO"",""SC"",""SL"",""GS"",""SH"",""KN"",""LC"",""PM"",""VC"",""TJ"",""TZ"",""TG"",""TK"",""TO"",""TM"",""TC"",""TV"",""UM"",""UG"",""VI"",""VG"",""WF"",""EH"",""ZM"",""ZW"",""UZ"",""VU"",""SR"",""SZ"",""AD"",""MC"",""SM"",""ME"",""VA"",""NEUTRAL""]}],""MarketProperties"":[{""OriginalReleaseDate"":""2021-10-05T21:38:45.1973879Z"",""OriginalReleaseDateFriendlyName"":"""",""MinimumUserAge"":0,""ContentRatings"":[{""RatingSystem"":""ESRB"",""RatingId"":""ESRB:E"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[""ESRB:UnrInt""]},{""RatingSystem"":""PEGI"",""RatingId"":""PEGI:3"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[""PEGI:UnrInt""]},{""RatingSystem"":""DJCTQ"",""RatingId"":""DJCTQ:L"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[""DJCTQ:UnrInt""]},{""RatingSystem"":""USK"",""RatingId"":""USK:Everyone"",""RatingDescriptors"":[""USK:ConDifAge""],""RatingDisclaimers"":[],""InteractiveElements"":[""USK:UnrInt""]},{""RatingSystem"":""IARC"",""RatingId"":""IARC:3"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[""IARC:UnrInt""]},{""RatingSystem"":""PCBP"",""RatingId"":""PCBP:0"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[""PCBP:UnrInt""]},{""RatingSystem"":""CSRR"",""RatingId"":""CSRR:G"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[]},{""RatingSystem"":""CCC"",""RatingId"":""CCC:TE"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[]},{""RatingSystem"":""Microsoft"",""RatingId"":""Microsoft:3"",""RatingDescriptors"":[],""RatingDisclaimers"":[],""InteractiveElements"":[]}],""RelatedProducts"":[],""UsageData"":[{""AggregateTimeSpan"":""7Days"",""AverageRating"":4.5,""PlayCount"":0,""RatingCount"":199,""RentalCount"":""0"",""TrialCount"":""0"",""PurchaseCount"":""0""},{""AggregateTimeSpan"":""30Days"",""AverageRating"":4.4,""PlayCount"":0,""RatingCount"":416,""RentalCount"":""0"",""TrialCount"":""0"",""PurchaseCount"":""0""},{""AggregateTimeSpan"":""AllTime"",""AverageRating"":4.5,""PlayCount"":0,""RatingCount"":20348,""RentalCount"":""0"",""TrialCount"":""0"",""PurchaseCount"":""0""}],""BundleConfig"":null,""Markets"":[""US""]}],""ProductASchema"":""Product;3"",""ProductBSchema"":""ProductUnifiedApp;3"",""ProductId"":""9NZVDKPMR9RD"",""Properties"":{""Attributes"":[{""Name"":""BroadcastSupport"",""Minimum"":null,""Maximum"":null,""ApplicablePlatforms"":null,""Group"":null}],""CanInstallToSDCard"":false,""Category"":""Productivity"",""SubCategory"":"""",""Categories"":null,""Extensions"":null,""IsAccessible"":false,""IsLineOfBusinessApp"":false,""IsPublishedToLegacyWindowsPhoneStore"":false,""IsPublishedToLegacyWindowsStore"":false,""IsSettingsApp"":false,""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""PackageIdentityName"":""Mozilla.Firefox"",""PublisherCertificateName"":""CN=082E9164-EE6C-4EC8-B62C-441FAE7BEFA1"",""PublisherId"":""77577580"",""XboxLiveTier"":null,""XboxXPA"":null,""XboxCrossGenSetId"":null,""XboxConsoleGenOptimized"":null,""XboxConsoleGenCompatible"":null,""XboxLiveGoldRequired"":false,""XBOX"":{},""ExtendedClientMetadata"":{},""OwnershipType"":null,""PdpBackgroundColor"":""#FFFFFF"",""HasAddOns"":false,""RevisionId"":""2024-04-30T14:41:20.5900076Z""},""AlternateIds"":[{""IdType"":""LegacyWindowsStoreProductId"",""Value"":""70bed52e-e1d3-467f-96b1-f4d474846515""},{""IdType"":""LegacyWindowsPhoneProductId"",""Value"":""60c1b112-072c-4657-b28d-d65f06e9d660""},{""IdType"":""XboxTitleId"",""Value"":""1728623981""}],""DomainDataVersion"":null,""IngestionSource"":""DCE"",""IsMicrosoftProduct"":false,""PreferredSkuId"":""0010"",""ProductType"":""Application"",""ValidationData"":{""PassedValidation"":false,""RevisionId"":""2024-04-30T14:41:20.5900076Z||.||95df8e43-f7a7-43f0-a00b-149bf8a386b1||1152921505697685831||Null||fullrelease"",""ValidationResultUri"":""""},""MerchandizingTags"":[],""PartD"":"""",""ProductFamily"":""Apps"",""SchemaVersion"":""3"",""ProductKind"":""Application"",""ProductPolicies"":{},""DisplaySkuAvailabilities"":[{""Sku"":{""LastModifiedDate"":""2024-04-30T14:41:13.2369856Z"",""LocalizedProperties"":[{""Contributors"":[],""Features"":[],""MinimumNotes"":"""",""RecommendedNotes"":"""",""ReleaseNotes"":""A faster, more intuitive Firefox now available in the Windows App Store"",""DisplayPlatformProperties"":null,""SkuDescription"":""Firefox Browser: fast, private & safe web browser\r\n\r\nWhen it comes to your life online, you have a choice: accept the factory settings or put your privacy first. When you choose Firefox for Windows as your default browser, you’re choosing to protect your data while supporting an independent tech company. Firefox is also the only major browser backed by a non-profit fighting to give you more openness, transparency and control of your life online. Join hundreds of millions of people who choose to protect what's important by choosing Firefox - a web browser designed to be fast, easy to use, customizable and private.\r\n\r\nA BROWSER THAT REFLECTS WHO YOU ARE \r\n- You can choose whatever default browser you want. Maybe think about using the only super-fast, ultra-private browser that’s backed by a non-profit? No pressure though.\r\n- Our secret sauce: Firefox Add-ons. They’re like these magical power-ups you can add to your Firefox browser to make it even better.\r\n- From watching a web tutorial to keeping an eye on your favorite team, your video follows you while you multitask with Picture-in-Picture.\r\n\r\nFAST. PRIVATE. SAFE.\r\nFirefox browser gives you effortless privacy protection with lightning-fast page loads. Enhanced Tracking Protection automatically blocks over 2,000 known online trackers from invading your privacy and slowing down your webpages. Firefox browser also introduces a clean new design that makes it easier to get more things done, more quickly. Plus, with smart browsing features built in, Firefox lets you take your privacy, passwords, and bookmarks with you safely wherever you go.\r\n\r\nYOU COME FIRST\r\nAs the internet grows and changes, Firefox continues to focus on your right to privacy — we call it the Personal Data Promise: Take less. Keep it safe. No secrets. Your data, your web activity, your life online is protected with Firefox.\r\n\r\nHOW FIREFOX COMPARES TO OTHER BROWSERS\r\nWhen it comes to all-around performance — speed, design, utility, ease of use, and a steadfast commitment to your privacy — no browser beats Firefox. And being backed by a non-profit means that unlike other browsers, we have no financial stake in following you around the web.\r\n\r\nPICK UP RIGHT WHERE YOU LEFT OFF\r\nStart using Firefox on your phone then switch to the Firefox browser on your computer. With Firefox across your devices you can take your bookmarks, saved logins and browsing history wherever you go. Firefox browser also takes the guesswork out of passwords by remembering your passwords across devices.\r\n\r\nKEEP FACEBOOK OFF YOUR BACK\r\nBuilt for Firefox, the Facebook Container extension helps to stop Facebook from collecting your personal data and web activity when you’re outside of Facebook — yes, they’re actually doing this.\r\n\r\nYOUR SAVE BUTTON FOR THE INTERNET\r\nHit the Pocket button when you come across an interesting article, video, recipe — you know, the good stuff on the internet — but just don’t have the time. Pocket stashes it in your own private, distraction-free space to dive into later.\r\n\r\nMULTITASKING MADE EASY\r\nPlay a video in a separate, scalable window that pins to the front of your desktop with the Picture-in-Picture feature. It stays and plays while you go about your other business on other tabs or do things outside of Firefox. \r\n\r\nEXTENSIONS FOR EVERY INTEREST\r\nFrom security to news to gaming, there’s an extension for everyone. Add as many as you want until your browser is just right.\r\n\r\nCHALLENGING THE STATUS QUO SINCE 1998\r\nFirefox was created by Mozilla as a faster, more private alternative to browsers like Microsoft Edge and Google Chrome. Our mission-driven company and volunteer community continue to put your privacy above all else."",""SkuTitle"":""Mozilla Firefox"",""SkuButtonTitle"":"""",""DeliveryDateOverlay"":null,""SkuDisplayRank"":[],""TextResources"":null,""Images"":[],""LegalText"":{""AdditionalLicenseTerms"":"""",""Copyright"":"""",""CopyrightUri"":"""",""PrivacyPolicy"":"""",""PrivacyPolicyUri"":""https://www.mozilla.org/privacy/firefox/"",""Tou"":"""",""TouUri"":""""},""Language"":""en-us"",""Markets"":[""US"",""DZ"",""AR"",""AU"",""AT"",""BH"",""BD"",""BE"",""BR"",""BG"",""CA"",""CL"",""CN"",""CO"",""CR"",""HR"",""CY"",""CZ"",""DK"",""EG"",""EE"",""FI"",""FR"",""DE"",""GR"",""GT"",""HK"",""HU"",""IS"",""IN"",""ID"",""IQ"",""IE"",""IL"",""IT"",""JP"",""JO"",""KZ"",""KE"",""KW"",""LV"",""LB"",""LI"",""LT"",""LU"",""MY"",""MT"",""MR"",""MX"",""MA"",""NL"",""NZ"",""NG"",""NO"",""OM"",""PK"",""PE"",""PH"",""PL"",""PT"",""QA"",""RO"",""RU"",""SA"",""RS"",""SG"",""SK"",""SI"",""ZA"",""KR"",""ES"",""SE"",""CH"",""TW"",""TH"",""TT"",""TN"",""TR"",""UA"",""AE"",""GB"",""VN"",""YE"",""LY"",""LK"",""UY"",""VE"",""AF"",""AX"",""AL"",""AS"",""AO"",""AI"",""AQ"",""AG"",""AM"",""AW"",""BO"",""BQ"",""BA"",""BW"",""BV"",""IO"",""BN"",""BF"",""BI"",""KH"",""CM"",""CV"",""KY"",""CF"",""TD"",""TL"",""DJ"",""DM"",""DO"",""EC"",""SV"",""GQ"",""ER"",""ET"",""FK"",""FO"",""FJ"",""GF"",""PF"",""TF"",""GA"",""GM"",""GE"",""GH"",""GI"",""GL"",""GD"",""GP"",""GU"",""GG"",""GN"",""GW"",""GY"",""HT"",""HM"",""HN"",""AZ"",""BS"",""BB"",""BY"",""BZ"",""BJ"",""BM"",""BT"",""KM"",""CG"",""CD"",""CK"",""CX"",""CC"",""CI"",""CW"",""JM"",""SJ"",""JE"",""KI"",""KG"",""LA"",""LS"",""LR"",""MO"",""MK"",""MG"",""MW"",""IM"",""MH"",""MQ"",""MU"",""YT"",""FM"",""MD"",""MN"",""MS"",""MZ"",""MM"",""NA"",""NR"",""NP"",""MV"",""ML"",""NC"",""NI"",""NE"",""NU"",""NF"",""PW"",""PS"",""PA"",""PG"",""PY"",""RE"",""RW"",""BL"",""MF"",""WS"",""ST"",""SN"",""MP"",""PN"",""SX"",""SB"",""SO"",""SC"",""SL"",""GS"",""SH"",""KN"",""LC"",""PM"",""VC"",""TJ"",""TZ"",""TG"",""TK"",""TO"",""TM"",""TC"",""TV"",""UM"",""UG"",""VI"",""VG"",""WF"",""EH"",""ZM"",""ZW"",""UZ"",""VU"",""SR"",""SZ"",""AD"",""MC"",""SM"",""ME"",""VA"",""NEUTRAL""]}],""MarketProperties"":[{""FirstAvailableDate"":""2021-10-05T21:38:45.1973879Z"",""SupportedLanguages"":[""en-us"",""zh-cn"",""zh-tw"",""cs"",""nl"",""en-ca"",""en-gb"",""fi"",""fr"",""el"",""hu"",""id"",""it"",""ja"",""pl"",""pt-br"",""pt-pt"",""ru"",""es-ar"",""es-mx"",""es-es"",""sv-se"",""tr"",""de"",""be"",""ar"",""bs"",""ca"",""cy"",""da"",""es-cl"",""sq"",""gl"",""ka"",""gu-in"",""hi-in"",""is"",""kk"",""ko"",""ms"",""nb-no"",""nn-no"",""pa-in"",""ro"",""si"",""sk"",""sl"",""th"",""uk"",""ur"",""vi""],""PackageIds"":null,""PIFilter"":null,""Markets"":[""US""]}],""ProductId"":""9NZVDKPMR9RD"",""Properties"":{""EarlyAdopterEnrollmentUrl"":null,""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0010"",""Content"":null,""PackageFeatures"":null},""FulfillmentType"":""WindowsUpdate"",""FulfillmentPluginId"":null,""HasThirdPartyIAPs"":false,""LastUpdateDate"":""2024-04-30T14:41:13.0000000Z"",""HardwareProperties"":{""MinimumHardware"":[],""RecommendedHardware"":[],""MinimumProcessor"":"""",""RecommendedProcessor"":"""",""MinimumGraphics"":"""",""RecommendedGraphics"":""""},""HardwareRequirements"":[],""HardwareWarningList"":[],""InstallationTerms"":""InstallationTermsStandard"",""Packages"":[{""Applications"":[{""ApplicationId"":""App"",""DeclarationOrder"":0,""Extensions"":[""appExecutionAlias-appExecutionAlias"",""fileTypeAssociation-.avif"",""fileTypeAssociation-.htm"",""fileTypeAssociation-.html"",""fileTypeAssociation-.pdf"",""fileTypeAssociation-.shtml"",""fileTypeAssociation-.xht"",""fileTypeAssociation-.xhtml"",""fileTypeAssociation-.svg"",""fileTypeAssociation-.webp"",""protocol-http"",""protocol-https"",""protocol-mailto"",""protocol-firefox-bridge"",""protocol-firefox-private-bridge"",""comServer-comServer"",""toastNotificationActivation-toastNotificationActivation""]}],""Architectures"":[""x86""],""Capabilities"":[""runFullTrust"",""Microsoft.storeFilter.core.notSupported_8wekyb3d8bbwe"",""Microsoft.requiresNonSMode_8wekyb3d8bbwe""],""DeviceCapabilities"":[],""ExperienceIds"":[],""FrameworkDependencies"":[],""HardwareDependencies"":[],""HardwareRequirements"":[],""Hash"":""zrZtsI/8iaERjKU5t10jEMnCC7QWpztt3BhLTsbyJ14="",""HashAlgorithm"":""SHA256"",""IsStreamingApp"":false,""Languages"":[""en-us"",""af"",""ar"",""be"",""bg"",""bn"",""bs"",""ca"",""cs"",""cy"",""da"",""de"",""el"",""en-ca"",""en-gb"",""es-ar"",""es-cl"",""es-es"",""es-mx"",""et"",""eu"",""fa"",""fi"",""fr"",""ga-ie"",""gl"",""gu-in"",""he"",""hi-in"",""hr"",""hu"",""hy-am"",""id"",""is"",""it"",""ja"",""ka"",""kk"",""km"",""kn"",""ko"",""lt"",""lv"",""mk"",""mr"",""ms"",""nb-no"",""ne-np"",""nl"",""nn-no"",""pa-in"",""pl"",""pt-br"",""pt-pt"",""ro"",""ru"",""si"",""sk"",""sl"",""sq"",""sv-se"",""ta"",""te"",""th"",""tr"",""uk"",""ur"",""vi"",""xh"",""zh-cn"",""zh-tw""],""MaxDownloadSizeInBytes"":146228493,""MaxInstallSizeInBytes"":289435648,""PackageFormat"":""Msix"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""MainPackageFamilyNameForDlc"":null,""PackageFullName"":""Mozilla.Firefox_125.0.3.0_x86__n80bbvh6b1yt2"",""PackageId"":""08dea409-a13a-9903-2bbc-7f5e541f1d94-X86"",""ContentId"":""642d213e-143d-9470-0528-23c84ddac98c"",""KeyId"":null,""PackageRank"":30001,""PackageUri"":""https://productingestionbin1.blob.core.windows.net"",""PlatformDependencies"":[{""MaxTested"":2814751249597971,""MinVersion"":2814750931222528,""PlatformName"":""Windows.Desktop""}],""PlatformDependencyXmlBlob"":""{\""blob.version\"":1688867040526336,\""content.isMain\"":false,\""content.packageId\"":\""Mozilla.Firefox_125.0.3.0_x86__n80bbvh6b1yt2\"",\""content.productId\"":\""60c1b112-072c-4657-b28d-d65f06e9d660\"",\""content.targetPlatforms\"":[{\""platform.maxVersionTested\"":2814751249597971,\""platform.minVersion\"":2814750931222528,\""platform.target\"":3}],\""content.type\"":7,\""policy\"":{\""category.first\"":\""app\"",\""category.second\"":\""Productivity\"",\""optOut.backupRestore\"":false,\""optOut.removeableMedia\"":true},\""policy2\"":{\""ageRating\"":1,\""optOut.DVR\"":true,\""thirdPartyAppRatings\"":[{\""level\"":7,\""systemId\"":3},{\""level\"":12,\""systemId\"":5},{\""level\"":48,\""systemId\"":12},{\""level\"":27,\""systemId\"":9},{\""level\"":76,\""systemId\"":16},{\""level\"":68,\""systemId\"":15},{\""level\"":54,\""systemId\"":13}]}}"",""ResourceId"":"""",""Version"":""35184372089028608"",""PackageDownloadUris"":null,""DriverDependencies"":[],""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0010"",""Content"":null,""PackageFeatures"":null}},{""Applications"":[{""ApplicationId"":""App"",""DeclarationOrder"":0,""Extensions"":[""appExecutionAlias-appExecutionAlias"",""fileTypeAssociation-.avif"",""fileTypeAssociation-.htm"",""fileTypeAssociation-.html"",""fileTypeAssociation-.pdf"",""fileTypeAssociation-.shtml"",""fileTypeAssociation-.xht"",""fileTypeAssociation-.xhtml"",""fileTypeAssociation-.svg"",""fileTypeAssociation-.webp"",""protocol-http"",""protocol-https"",""protocol-mailto"",""protocol-firefox-bridge"",""protocol-firefox-private-bridge"",""comServer-comServer"",""toastNotificationActivation-toastNotificationActivation""]}],""Architectures"":[""x64""],""Capabilities"":[""runFullTrust"",""Microsoft.storeFilter.core.notSupported_8wekyb3d8bbwe"",""Microsoft.requiresNonSMode_8wekyb3d8bbwe""],""DeviceCapabilities"":[],""ExperienceIds"":[],""FrameworkDependencies"":[],""HardwareDependencies"":[],""HardwareRequirements"":[],""Hash"":""m7sF5N88lREGMPNzhM+f3gvbYkMPDD2mwqiFQelHvFU="",""HashAlgorithm"":""SHA256"",""IsStreamingApp"":false,""Languages"":[""en-us"",""af"",""ar"",""be"",""bg"",""bn"",""bs"",""ca"",""cs"",""cy"",""da"",""de"",""el"",""en-ca"",""en-gb"",""es-ar"",""es-cl"",""es-es"",""es-mx"",""et"",""eu"",""fa"",""fi"",""fr"",""ga-ie"",""gl"",""gu-in"",""he"",""hi-in"",""hr"",""hu"",""hy-am"",""id"",""is"",""it"",""ja"",""ka"",""kk"",""km"",""kn"",""ko"",""lt"",""lv"",""mk"",""mr"",""ms"",""nb-no"",""ne-np"",""nl"",""nn-no"",""pa-in"",""pl"",""pt-br"",""pt-pt"",""ro"",""ru"",""si"",""sk"",""sl"",""sq"",""sv-se"",""ta"",""te"",""th"",""tr"",""uk"",""ur"",""vi"",""xh"",""zh-cn"",""zh-tw""],""MaxDownloadSizeInBytes"":150856555,""MaxInstallSizeInBytes"":305274880,""PackageFormat"":""Msix"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""MainPackageFamilyNameForDlc"":null,""PackageFullName"":""Mozilla.Firefox_125.0.3.0_x64__n80bbvh6b1yt2"",""PackageId"":""7698ca0e-0912-77ba-3a73-1504a9fef084-X64"",""ContentId"":""642d213e-143d-9470-0528-23c84ddac98c"",""KeyId"":null,""PackageRank"":30002,""PackageUri"":""https://productingestionbin1.blob.core.windows.net"",""PlatformDependencies"":[{""MaxTested"":2814751249597971,""MinVersion"":2814750931222528,""PlatformName"":""Windows.Desktop""}],""PlatformDependencyXmlBlob"":""{\""blob.version\"":1688867040526336,\""content.isMain\"":false,\""content.packageId\"":\""Mozilla.Firefox_125.0.3.0_x64__n80bbvh6b1yt2\"",\""content.productId\"":\""60c1b112-072c-4657-b28d-d65f06e9d660\"",\""content.targetPlatforms\"":[{\""platform.maxVersionTested\"":2814751249597971,\""platform.minVersion\"":2814750931222528,\""platform.target\"":3}],\""content.type\"":7,\""policy\"":{\""category.first\"":\""app\"",\""category.second\"":\""Productivity\"",\""optOut.backupRestore\"":false,\""optOut.removeableMedia\"":true},\""policy2\"":{\""ageRating\"":1,\""optOut.DVR\"":true,\""thirdPartyAppRatings\"":[{\""level\"":7,\""systemId\"":3},{\""level\"":12,\""systemId\"":5},{\""level\"":48,\""systemId\"":12},{\""level\"":27,\""systemId\"":9},{\""level\"":76,\""systemId\"":16},{\""level\"":68,\""systemId\"":15},{\""level\"":54,\""systemId\"":13}]}}"",""ResourceId"":"""",""Version"":""35184372089028608"",""PackageDownloadUris"":null,""DriverDependencies"":[],""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0010"",""Content"":null,""PackageFeatures"":null}}],""VersionString"":"""",""VisibleToB2BServiceIds"":[],""XboxXPA"":false,""BundledSkus"":[],""IsRepurchasable"":false,""SkuDisplayRank"":0,""DisplayPhysicalStoreInventory"":null,""AdditionalIdentifiers"":[],""IsTrial"":false,""IsPreOrder"":false,""IsBundle"":false},""SkuASchema"":""Sku;3"",""SkuBSchema"":""SkuUnifiedApp;3"",""SkuId"":""0010"",""SkuType"":""full"",""RecurrencePolicy"":null,""SubscriptionPolicyId"":null},""Availabilities"":[{""Actions"":[""Details"",""Fulfill"",""Purchase"",""Browse"",""Curate"",""Redeem""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9RBCP3VR54XC"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Desktop""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.8828080""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z""},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""PIFilter"":{""ExclusionProperties"":[],""InclusionProperties"":[]},""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":""TaxesNotIncluded"",""WholesaleCurrencyCode"":""""}},""Properties"":{""OriginalReleaseDate"":""2021-10-05T21:38:45.1973879Z""},""SkuId"":""0010"",""DisplayRank"":0,""RemediationRequired"":false},{""Actions"":[""License"",""Browse"",""Details""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9TXXNTRLPTLW"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Desktop""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.8828080""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z""},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""LicensingData"":{""SatisfyingEntitlementKeys"":[{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0010""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""wes:App:60c1b112-072c-4657-b28d-d65f06e9d660:Full""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""wes:App:70bed52e-e1d3-467f-96b1-f4d474846515:Full""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0001""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0002""],""LicensingKeyIds"":[""1""]}]},""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":"""",""WholesaleCurrencyCode"":""""}},""Properties"":{},""SkuId"":""0010"",""DisplayRank"":1,""RemediationRequired"":false},{""Actions"":[""License"",""Details""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9SH85X02C4KQ"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Mobile""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Team""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Xbox""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Holographic""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Core""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z""},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""LicensingData"":{""SatisfyingEntitlementKeys"":[{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0010""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""wes:App:60c1b112-072c-4657-b28d-d65f06e9d660:Full""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""wes:App:70bed52e-e1d3-467f-96b1-f4d474846515:Full""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0001""],""LicensingKeyIds"":[""1""]},{""EntitlementKeys"":[""big:9NZVDKPMR9RD:0002""],""LicensingKeyIds"":[""1""]}]},""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":"""",""WholesaleCurrencyCode"":""""}},""Properties"":{},""SkuId"":""0010"",""DisplayRank"":2,""RemediationRequired"":false}],""HistoricalBestAvailabilities"":[{""Actions"":[""Details"",""Fulfill"",""Purchase"",""Browse"",""Curate"",""Redeem""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9RBCP3VR54XC"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Desktop""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.8828080""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z"",""EligibilityPredicateIds"":[""CannotSeenByChinaClient""],""SupportedCatalogVersion"":6},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""PIFilter"":{""ExclusionProperties"":[],""InclusionProperties"":[]},""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":""TaxesNotIncluded"",""WholesaleCurrencyCode"":""""}},""Properties"":{""OriginalReleaseDate"":""2021-10-05T21:38:45.1973879Z""},""SkuId"":""0010"",""DisplayRank"":0,""ProductASchema"":""Product;3""}]},{""Sku"":{""LastModifiedDate"":""2024-04-30T14:41:13.2369856Z"",""LocalizedProperties"":[{""Contributors"":[],""Features"":[],""MinimumNotes"":"""",""RecommendedNotes"":"""",""ReleaseNotes"":""A faster, more intuitive Firefox now available in the Windows App Store"",""DisplayPlatformProperties"":null,""SkuDescription"":""Firefox Browser: fast, private & safe web browser\r\n\r\nWhen it comes to your life online, you have a choice: accept the factory settings or put your privacy first. When you choose Firefox for Windows as your default browser, you’re choosing to protect your data while supporting an independent tech company. Firefox is also the only major browser backed by a non-profit fighting to give you more openness, transparency and control of your life online. Join hundreds of millions of people who choose to protect what's important by choosing Firefox - a web browser designed to be fast, easy to use, customizable and private.\r\n\r\nA BROWSER THAT REFLECTS WHO YOU ARE \r\n- You can choose whatever default browser you want. Maybe think about using the only super-fast, ultra-private browser that’s backed by a non-profit? No pressure though.\r\n- Our secret sauce: Firefox Add-ons. They’re like these magical power-ups you can add to your Firefox browser to make it even better.\r\n- From watching a web tutorial to keeping an eye on your favorite team, your video follows you while you multitask with Picture-in-Picture.\r\n\r\nFAST. PRIVATE. SAFE.\r\nFirefox browser gives you effortless privacy protection with lightning-fast page loads. Enhanced Tracking Protection automatically blocks over 2,000 known online trackers from invading your privacy and slowing down your webpages. Firefox browser also introduces a clean new design that makes it easier to get more things done, more quickly. Plus, with smart browsing features built in, Firefox lets you take your privacy, passwords, and bookmarks with you safely wherever you go.\r\n\r\nYOU COME FIRST\r\nAs the internet grows and changes, Firefox continues to focus on your right to privacy — we call it the Personal Data Promise: Take less. Keep it safe. No secrets. Your data, your web activity, your life online is protected with Firefox.\r\n\r\nHOW FIREFOX COMPARES TO OTHER BROWSERS\r\nWhen it comes to all-around performance — speed, design, utility, ease of use, and a steadfast commitment to your privacy — no browser beats Firefox. And being backed by a non-profit means that unlike other browsers, we have no financial stake in following you around the web.\r\n\r\nPICK UP RIGHT WHERE YOU LEFT OFF\r\nStart using Firefox on your phone then switch to the Firefox browser on your computer. With Firefox across your devices you can take your bookmarks, saved logins and browsing history wherever you go. Firefox browser also takes the guesswork out of passwords by remembering your passwords across devices.\r\n\r\nKEEP FACEBOOK OFF YOUR BACK\r\nBuilt for Firefox, the Facebook Container extension helps to stop Facebook from collecting your personal data and web activity when you’re outside of Facebook — yes, they’re actually doing this.\r\n\r\nYOUR SAVE BUTTON FOR THE INTERNET\r\nHit the Pocket button when you come across an interesting article, video, recipe — you know, the good stuff on the internet — but just don’t have the time. Pocket stashes it in your own private, distraction-free space to dive into later.\r\n\r\nMULTITASKING MADE EASY\r\nPlay a video in a separate, scalable window that pins to the front of your desktop with the Picture-in-Picture feature. It stays and plays while you go about your other business on other tabs or do things outside of Firefox. \r\n\r\nEXTENSIONS FOR EVERY INTEREST\r\nFrom security to news to gaming, there’s an extension for everyone. Add as many as you want until your browser is just right.\r\n\r\nCHALLENGING THE STATUS QUO SINCE 1998\r\nFirefox was created by Mozilla as a faster, more private alternative to browsers like Microsoft Edge and Google Chrome. Our mission-driven company and volunteer community continue to put your privacy above all else."",""SkuTitle"":""Mozilla Firefox"",""SkuButtonTitle"":"""",""DeliveryDateOverlay"":null,""SkuDisplayRank"":[],""TextResources"":null,""Images"":[],""LegalText"":{""AdditionalLicenseTerms"":"""",""Copyright"":"""",""CopyrightUri"":"""",""PrivacyPolicy"":"""",""PrivacyPolicyUri"":""https://www.mozilla.org/privacy/firefox/"",""Tou"":"""",""TouUri"":""""},""Language"":""en-us"",""Markets"":[""US"",""DZ"",""AR"",""AU"",""AT"",""BH"",""BD"",""BE"",""BR"",""BG"",""CA"",""CL"",""CN"",""CO"",""CR"",""HR"",""CY"",""CZ"",""DK"",""EG"",""EE"",""FI"",""FR"",""DE"",""GR"",""GT"",""HK"",""HU"",""IS"",""IN"",""ID"",""IQ"",""IE"",""IL"",""IT"",""JP"",""JO"",""KZ"",""KE"",""KW"",""LV"",""LB"",""LI"",""LT"",""LU"",""MY"",""MT"",""MR"",""MX"",""MA"",""NL"",""NZ"",""NG"",""NO"",""OM"",""PK"",""PE"",""PH"",""PL"",""PT"",""QA"",""RO"",""RU"",""SA"",""RS"",""SG"",""SK"",""SI"",""ZA"",""KR"",""ES"",""SE"",""CH"",""TW"",""TH"",""TT"",""TN"",""TR"",""UA"",""AE"",""GB"",""VN"",""YE"",""LY"",""LK"",""UY"",""VE"",""AF"",""AX"",""AL"",""AS"",""AO"",""AI"",""AQ"",""AG"",""AM"",""AW"",""BO"",""BQ"",""BA"",""BW"",""BV"",""IO"",""BN"",""BF"",""BI"",""KH"",""CM"",""CV"",""KY"",""CF"",""TD"",""TL"",""DJ"",""DM"",""DO"",""EC"",""SV"",""GQ"",""ER"",""ET"",""FK"",""FO"",""FJ"",""GF"",""PF"",""TF"",""GA"",""GM"",""GE"",""GH"",""GI"",""GL"",""GD"",""GP"",""GU"",""GG"",""GN"",""GW"",""GY"",""HT"",""HM"",""HN"",""AZ"",""BS"",""BB"",""BY"",""BZ"",""BJ"",""BM"",""BT"",""KM"",""CG"",""CD"",""CK"",""CX"",""CC"",""CI"",""CW"",""JM"",""SJ"",""JE"",""KI"",""KG"",""LA"",""LS"",""LR"",""MO"",""MK"",""MG"",""MW"",""IM"",""MH"",""MQ"",""MU"",""YT"",""FM"",""MD"",""MN"",""MS"",""MZ"",""MM"",""NA"",""NR"",""NP"",""MV"",""ML"",""NC"",""NI"",""NE"",""NU"",""NF"",""PW"",""PS"",""PA"",""PG"",""PY"",""RE"",""RW"",""BL"",""MF"",""WS"",""ST"",""SN"",""MP"",""PN"",""SX"",""SB"",""SO"",""SC"",""SL"",""GS"",""SH"",""KN"",""LC"",""PM"",""VC"",""TJ"",""TZ"",""TG"",""TK"",""TO"",""TM"",""TC"",""TV"",""UM"",""UG"",""VI"",""VG"",""WF"",""EH"",""ZM"",""ZW"",""UZ"",""VU"",""SR"",""SZ"",""AD"",""MC"",""SM"",""ME"",""VA"",""NEUTRAL""]}],""MarketProperties"":[{""FirstAvailableDate"":""2021-10-05T21:38:45.1973879Z"",""SupportedLanguages"":[""en-us"",""zh-cn"",""zh-tw"",""cs"",""nl"",""en-ca"",""en-gb"",""fi"",""fr"",""el"",""hu"",""id"",""it"",""ja"",""pl"",""pt-br"",""pt-pt"",""ru"",""es-ar"",""es-mx"",""es-es"",""sv-se"",""tr"",""de"",""be"",""ar"",""bs"",""ca"",""cy"",""da"",""es-cl"",""sq"",""gl"",""ka"",""gu-in"",""hi-in"",""is"",""kk"",""ko"",""ms"",""nb-no"",""nn-no"",""pa-in"",""ro"",""si"",""sk"",""sl"",""th"",""uk"",""ur"",""vi""],""PackageIds"":null,""PIFilter"":null,""Markets"":[""US""]}],""ProductId"":""9NZVDKPMR9RD"",""Properties"":{""EarlyAdopterEnrollmentUrl"":null,""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0011"",""Content"":null,""PackageFeatures"":null},""FulfillmentType"":""WindowsUpdate"",""FulfillmentPluginId"":null,""HasThirdPartyIAPs"":false,""LastUpdateDate"":""2024-04-30T14:41:13.0000000Z"",""HardwareProperties"":{""MinimumHardware"":[],""RecommendedHardware"":[],""MinimumProcessor"":"""",""RecommendedProcessor"":"""",""MinimumGraphics"":"""",""RecommendedGraphics"":""""},""HardwareRequirements"":[],""HardwareWarningList"":[],""InstallationTerms"":""InstallationTermsStandard"",""Packages"":[{""Applications"":[{""ApplicationId"":""App"",""DeclarationOrder"":0,""Extensions"":[""appExecutionAlias-appExecutionAlias"",""fileTypeAssociation-.avif"",""fileTypeAssociation-.htm"",""fileTypeAssociation-.html"",""fileTypeAssociation-.pdf"",""fileTypeAssociation-.shtml"",""fileTypeAssociation-.xht"",""fileTypeAssociation-.xhtml"",""fileTypeAssociation-.svg"",""fileTypeAssociation-.webp"",""protocol-http"",""protocol-https"",""protocol-mailto"",""protocol-firefox-bridge"",""protocol-firefox-private-bridge"",""comServer-comServer"",""toastNotificationActivation-toastNotificationActivation""]}],""Architectures"":[""x86""],""Capabilities"":[""runFullTrust"",""Microsoft.storeFilter.core.notSupported_8wekyb3d8bbwe"",""Microsoft.requiresNonSMode_8wekyb3d8bbwe""],""DeviceCapabilities"":[],""ExperienceIds"":[],""FrameworkDependencies"":[],""HardwareDependencies"":[],""HardwareRequirements"":[],""Hash"":""zrZtsI/8iaERjKU5t10jEMnCC7QWpztt3BhLTsbyJ14="",""HashAlgorithm"":""SHA256"",""IsStreamingApp"":false,""Languages"":[""en-us"",""af"",""ar"",""be"",""bg"",""bn"",""bs"",""ca"",""cs"",""cy"",""da"",""de"",""el"",""en-ca"",""en-gb"",""es-ar"",""es-cl"",""es-es"",""es-mx"",""et"",""eu"",""fa"",""fi"",""fr"",""ga-ie"",""gl"",""gu-in"",""he"",""hi-in"",""hr"",""hu"",""hy-am"",""id"",""is"",""it"",""ja"",""ka"",""kk"",""km"",""kn"",""ko"",""lt"",""lv"",""mk"",""mr"",""ms"",""nb-no"",""ne-np"",""nl"",""nn-no"",""pa-in"",""pl"",""pt-br"",""pt-pt"",""ro"",""ru"",""si"",""sk"",""sl"",""sq"",""sv-se"",""ta"",""te"",""th"",""tr"",""uk"",""ur"",""vi"",""xh"",""zh-cn"",""zh-tw""],""MaxDownloadSizeInBytes"":146228493,""MaxInstallSizeInBytes"":289435648,""PackageFormat"":""Msix"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""MainPackageFamilyNameForDlc"":null,""PackageFullName"":""Mozilla.Firefox_125.0.3.0_x86__n80bbvh6b1yt2"",""PackageId"":""08dea409-a13a-9903-2bbc-7f5e541f1d94-X86"",""ContentId"":""642d213e-143d-9470-0528-23c84ddac98c"",""KeyId"":null,""PackageRank"":30001,""PackageUri"":""https://productingestionbin1.blob.core.windows.net"",""PlatformDependencies"":[{""MaxTested"":2814751249597971,""MinVersion"":2814750931222528,""PlatformName"":""Windows.Desktop""}],""PlatformDependencyXmlBlob"":""{\""blob.version\"":1688867040526336,\""content.isMain\"":false,\""content.packageId\"":\""Mozilla.Firefox_125.0.3.0_x86__n80bbvh6b1yt2\"",\""content.productId\"":\""60c1b112-072c-4657-b28d-d65f06e9d660\"",\""content.targetPlatforms\"":[{\""platform.maxVersionTested\"":2814751249597971,\""platform.minVersion\"":2814750931222528,\""platform.target\"":3}],\""content.type\"":7,\""policy\"":{\""category.first\"":\""app\"",\""category.second\"":\""Productivity\"",\""optOut.backupRestore\"":false,\""optOut.removeableMedia\"":true},\""policy2\"":{\""ageRating\"":1,\""optOut.DVR\"":true,\""thirdPartyAppRatings\"":[{\""level\"":7,\""systemId\"":3},{\""level\"":12,\""systemId\"":5},{\""level\"":48,\""systemId\"":12},{\""level\"":27,\""systemId\"":9},{\""level\"":76,\""systemId\"":16},{\""level\"":68,\""systemId\"":15},{\""level\"":54,\""systemId\"":13}]}}"",""ResourceId"":"""",""Version"":""35184372089028608"",""PackageDownloadUris"":null,""DriverDependencies"":[],""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0011"",""Content"":null,""PackageFeatures"":null}},{""Applications"":[{""ApplicationId"":""App"",""DeclarationOrder"":0,""Extensions"":[""appExecutionAlias-appExecutionAlias"",""fileTypeAssociation-.avif"",""fileTypeAssociation-.htm"",""fileTypeAssociation-.html"",""fileTypeAssociation-.pdf"",""fileTypeAssociation-.shtml"",""fileTypeAssociation-.xht"",""fileTypeAssociation-.xhtml"",""fileTypeAssociation-.svg"",""fileTypeAssociation-.webp"",""protocol-http"",""protocol-https"",""protocol-mailto"",""protocol-firefox-bridge"",""protocol-firefox-private-bridge"",""comServer-comServer"",""toastNotificationActivation-toastNotificationActivation""]}],""Architectures"":[""x64""],""Capabilities"":[""runFullTrust"",""Microsoft.storeFilter.core.notSupported_8wekyb3d8bbwe"",""Microsoft.requiresNonSMode_8wekyb3d8bbwe""],""DeviceCapabilities"":[],""ExperienceIds"":[],""FrameworkDependencies"":[],""HardwareDependencies"":[],""HardwareRequirements"":[],""Hash"":""m7sF5N88lREGMPNzhM+f3gvbYkMPDD2mwqiFQelHvFU="",""HashAlgorithm"":""SHA256"",""IsStreamingApp"":false,""Languages"":[""en-us"",""af"",""ar"",""be"",""bg"",""bn"",""bs"",""ca"",""cs"",""cy"",""da"",""de"",""el"",""en-ca"",""en-gb"",""es-ar"",""es-cl"",""es-es"",""es-mx"",""et"",""eu"",""fa"",""fi"",""fr"",""ga-ie"",""gl"",""gu-in"",""he"",""hi-in"",""hr"",""hu"",""hy-am"",""id"",""is"",""it"",""ja"",""ka"",""kk"",""km"",""kn"",""ko"",""lt"",""lv"",""mk"",""mr"",""ms"",""nb-no"",""ne-np"",""nl"",""nn-no"",""pa-in"",""pl"",""pt-br"",""pt-pt"",""ro"",""ru"",""si"",""sk"",""sl"",""sq"",""sv-se"",""ta"",""te"",""th"",""tr"",""uk"",""ur"",""vi"",""xh"",""zh-cn"",""zh-tw""],""MaxDownloadSizeInBytes"":150856555,""MaxInstallSizeInBytes"":305274880,""PackageFormat"":""Msix"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""MainPackageFamilyNameForDlc"":null,""PackageFullName"":""Mozilla.Firefox_125.0.3.0_x64__n80bbvh6b1yt2"",""PackageId"":""7698ca0e-0912-77ba-3a73-1504a9fef084-X64"",""ContentId"":""642d213e-143d-9470-0528-23c84ddac98c"",""KeyId"":null,""PackageRank"":30002,""PackageUri"":""https://productingestionbin1.blob.core.windows.net"",""PlatformDependencies"":[{""MaxTested"":2814751249597971,""MinVersion"":2814750931222528,""PlatformName"":""Windows.Desktop""}],""PlatformDependencyXmlBlob"":""{\""blob.version\"":1688867040526336,\""content.isMain\"":false,\""content.packageId\"":\""Mozilla.Firefox_125.0.3.0_x64__n80bbvh6b1yt2\"",\""content.productId\"":\""60c1b112-072c-4657-b28d-d65f06e9d660\"",\""content.targetPlatforms\"":[{\""platform.maxVersionTested\"":2814751249597971,\""platform.minVersion\"":2814750931222528,\""platform.target\"":3}],\""content.type\"":7,\""policy\"":{\""category.first\"":\""app\"",\""category.second\"":\""Productivity\"",\""optOut.backupRestore\"":false,\""optOut.removeableMedia\"":true},\""policy2\"":{\""ageRating\"":1,\""optOut.DVR\"":true,\""thirdPartyAppRatings\"":[{\""level\"":7,\""systemId\"":3},{\""level\"":12,\""systemId\"":5},{\""level\"":48,\""systemId\"":12},{\""level\"":27,\""systemId\"":9},{\""level\"":76,\""systemId\"":16},{\""level\"":68,\""systemId\"":15},{\""level\"":54,\""systemId\"":13}]}}"",""ResourceId"":"""",""Version"":""35184372089028608"",""PackageDownloadUris"":null,""DriverDependencies"":[],""FulfillmentData"":{""ProductId"":""9NZVDKPMR9RD"",""WuBundleId"":""f5e8ea9b-4ff6-4b62-99b6-740e683367a7"",""WuCategoryId"":""b234f54f-cf50-4416-9fc0-b9742f96d0a0"",""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""SkuId"":""0011"",""Content"":null,""PackageFeatures"":null}}],""VersionString"":"""",""VisibleToB2BServiceIds"":[],""XboxXPA"":false,""BundledSkus"":[],""IsRepurchasable"":false,""SkuDisplayRank"":2,""DisplayPhysicalStoreInventory"":null,""AdditionalIdentifiers"":[],""IsTrial"":true,""IsPreOrder"":false,""IsBundle"":false},""SkuASchema"":""Sku;3"",""SkuBSchema"":""SkuUnifiedApp;3"",""SkuId"":""0011"",""SkuType"":""trial"",""RecurrencePolicy"":null,""SubscriptionPolicyId"":null},""Availabilities"":[{""Actions"":[""Details"",""License"",""Fulfill""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9P32GQQH8MSX"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Desktop""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.8828080""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z""},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":"""",""WholesaleCurrencyCode"":""""}},""Properties"":{},""SkuId"":""0011"",""DisplayRank"":0,""RemediationRequired"":false},{""Actions"":[""License"",""Details""],""AvailabilityASchema"":""Availability;3"",""AvailabilityBSchema"":""AvailabilityUnifiedApp;3"",""AvailabilityId"":""9PT62300SK6S"",""Conditions"":{""ClientConditions"":{""AllowedPlatforms"":[{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Mobile""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Team""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Xbox""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Holographic""},{""MaxVersion"":2147483647,""MinVersion"":0,""PlatformName"":""Windows.Core""}]},""EndDate"":""9998-12-30T00:00:00.0000000Z"",""ResourceSetIds"":[""1""],""StartDate"":""1753-01-01T00:00:00.0000000Z""},""LastModifiedDate"":""2024-04-30T14:39:37.7718031Z"",""Markets"":[""US""],""OrderManagementData"":{""GrantedEntitlementKeys"":[],""Price"":{""CurrencyCode"":""USD"",""IsPIRequired"":false,""ListPrice"":0.0,""MSRP"":0.0,""TaxType"":"""",""WholesaleCurrencyCode"":""""}},""Properties"":{},""SkuId"":""0011"",""DisplayRank"":1,""RemediationRequired"":false}],""HistoricalBestAvailabilities"":[]}]}]}";

        var httpClient = Substitute.For<HttpClient>();
        var logger = Substitute.For<ILogger<MicrosoftStoreClient>>();
        var client = new MicrosoftStoreClient(httpClient, logger);
        var cancellationToken = new CancellationToken();

        var fakeResponse = new HttpResponseMessage
        {
            Content = new StringContent(responseData, Encoding.UTF8, "application/json")
        };

        httpClient.SendAsync(Arg.Is<HttpRequestMessage>(req =>
            req.Method == HttpMethod.Get
            && req.RequestUri == new Uri($"https://displaycatalog.mp.microsoft.com/v7.0/products?bigIds={packageId}&market=US&languages=en-us")), cancellationToken)
            .Returns(fakeResponse);

        // Act
        var result = await client.GetDisplayCatalogAsync(packageId, cancellationToken);

        // Assert
        Assert.NotNull(result);
        var product = result?.Products.FirstOrDefault();
        Assert.NotNull(product);
        Assert.Equal(packageId, product.ProductId);
        Assert.Equal("Mozilla Firefox", product.LocalizedProperties.FirstOrDefault().ProductTitle);

        var image = product.LocalizedProperties.FirstOrDefault().Images.FirstOrDefault(i => i.Height == 300 && i.Width == 300);
        Assert.NotNull(image);
    }

    [Fact]
    public async Task GetManifestAsync_ReturnsExpectedResult()
    {
        const string packageId = "9NZVDKPMR9RD";
        const string responseData = @"{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.PackageManifestResponse, StoreEdgeFD"",""Data"":{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.PackageManifestData, StoreEdgeFD"",""PackageIdentifier"":""9NZVDKPMR9RD"",""Versions"":[{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.PackageManifestVersion, StoreEdgeFD"",""PackageVersion"":""Unknown"",""DefaultLocale"":{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.DefaultLocale, StoreEdgeFD"",""PackageLocale"":""en-us"",""Publisher"":""Mozilla"",""PublisherUrl"":""https://www.mozilla.org/firefox/"",""PrivacyUrl"":""https://www.mozilla.org/privacy/firefox/"",""PublisherSupportUrl"":""https://support.mozilla.org/products/firefox"",""PackageName"":""Mozilla Firefox"",""License"":""ms-windows-store://pdp/?ProductId=9NZVDKPMR9RD"",""Copyright"":"""",""ShortDescription"":""Firefox Browser: fast, private & safe web browser\r\n\r\nWhen it comes to your life online, you have a choice: accept the factory settings or put your privacy first. When you choose Firefox for Windows as your default browser, you’re choosing to protect your d..."",""Description"":""Firefox Browser: fast, private & safe web browser\r\n\r\nWhen it comes to your life online, you have a choice: accept the factory settings or put your privacy first. When you choose Firefox for Windows as your default browser, you’re choosing to protect your data while supporting an independent tech company. Firefox is also the only major browser backed by a non-profit fighting to give you more openness, transparency and control of your life online. Join hundreds of millions of people who choose to protect what's important by choosing Firefox - a web browser designed to be fast, easy to use, customizable and private.\r\n\r\nA BROWSER THAT REFLECTS WHO YOU ARE \r\n- You can choose whatever default browser you want. Maybe think about using the only super-fast, ultra-private browser that’s backed by a non-profit? No pressure though.\r\n- Our secret sauce: Firefox Add-ons. They’re like these magical power-ups you can add to your Firefox browser to make it even better.\r\n- From watching a web tutorial to keeping an eye on your favorite team, your video follows you while you multitask with Picture-in-Picture.\r\n\r\nFAST. PRIVATE. SAFE.\r\nFirefox browser gives you effortless privacy protection with lightning-fast page loads. Enhanced Tracking Protection automatically blocks over 2,000 known online trackers from invading your privacy and slowing down your webpages. Firefox browser also introduces a clean new design that makes it easier to get more things done, more quickly. Plus, with smart browsing features built in, Firefox lets you take your privacy, passwords, and bookmarks with you safely wherever you go.\r\n\r\nYOU COME FIRST\r\nAs the internet grows and changes, Firefox continues to focus on your right to privacy — we call it the Personal Data Promise: Take less. Keep it safe. No secrets. Your data, your web activity, your life online is protected with Firefox.\r\n\r\nHOW FIREFOX COMPARES TO OTHER BROWSERS\r\nWhen it comes to all-around performance — speed, design, utility, ease of use, and a steadfast commitment to your privacy — no browser beats Firefox. And being backed by a non-profit means that unlike other browsers, we have no financial stake in following you around the web.\r\n\r\nPICK UP RIGHT WHERE YOU LEFT OFF\r\nStart using Firefox on your phone then switch to the Firefox browser on your computer. With Firefox across your devices you can take your bookmarks, saved logins and browsing history wherever you go. Firefox browser also takes the guesswork out of passwords by remembering your passwords across devices.\r\n\r\nKEEP FACEBOOK OFF YOUR BACK\r\nBuilt for Firefox, the Facebook Container extension helps to stop Facebook from collecting your personal data and web activity when you’re outside of Facebook — yes, they’re actually doing this.\r\n\r\nYOUR SAVE BUTTON FOR THE INTERNET\r\nHit the Pocket button when you come across an interesting article, video, recipe — you know, the good stuff on the internet — but just don’t have the time. Pocket stashes it in your own private, distraction-free space to dive into later.\r\n\r\nMULTITASKING MADE EASY\r\nPlay a video in a separate, scalable window that pins to the front of your desktop with the Picture-in-Picture feature. It stays and plays while you go about your other business on other tabs or do things outside of Firefox. \r\n\r\nEXTENSIONS FOR EVERY INTEREST\r\nFrom security to news to gaming, there’s an extension for everyone. Add as many as you want until your browser is just right.\r\n\r\nCHALLENGING THE STATUS QUO SINCE 1998\r\nFirefox was created by Mozilla as a faster, more private alternative to browsers like Microsoft Edge and Google Chrome. Our mission-driven company and volunteer community continue to put your privacy above all else."",""Tags"":[],""Agreements"":[{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Category"",""Agreement"":""Productivity""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Pricing"",""Agreement"":""Free""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Free Trial"",""Agreement"":""No""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Terms of Transaction"",""AgreementUrl"":""https://aka.ms/microsoft-store-terms-of-transaction""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Seizure Warning"",""AgreementUrl"":""https://aka.ms/microsoft-store-seizure-warning""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.AgreementDetail, StoreEdgeFD"",""AgreementLabel"":""Store License Terms"",""AgreementUrl"":""https://aka.ms/microsoft-store-license""}]},""Installers"":[{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.BigCatInstaller, StoreEdgeFD"",""MSStoreProductIdentifier"":""9NZVDKPMR9RD"",""Architecture"":""x86"",""InstallerType"":""msstore"",""Markets"":{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.Markets, StoreEdgeFD"",""AllowedMarkets"":[""US""]},""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""Scope"":""user""},{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.BigCatInstaller, StoreEdgeFD"",""MSStoreProductIdentifier"":""9NZVDKPMR9RD"",""Architecture"":""x64"",""InstallerType"":""msstore"",""Markets"":{""$type"":""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.PackageManifest.Markets, StoreEdgeFD"",""AllowedMarkets"":[""US""]},""PackageFamilyName"":""Mozilla.Firefox_n80bbvh6b1yt2"",""Scope"":""user""}]}]}}";

        var httpClient = Substitute.For<HttpClient>();
        var logger = Substitute.For<ILogger<MicrosoftStoreClient>>();
        var client = new MicrosoftStoreClient(httpClient, logger);
        var cancellationToken = new CancellationToken();

        var fakeResponse = new HttpResponseMessage
        {
            Content = new StringContent(responseData, Encoding.UTF8, "application/json")
        };

        httpClient.SendAsync(Arg.Is<HttpRequestMessage>(req =>
            req.Method == HttpMethod.Get
            && req.RequestUri == new Uri($"https://storeedgefd.dsx.mp.microsoft.com/v9.0/packageManifests/{packageId}")), cancellationToken)
            .Returns(fakeResponse);

        // Act
        var result = await client.GetManifestAsync(packageId, cancellationToken);

        // Assert
        Assert.NotNull(result);
        Assert.Equal(packageId, result.Data.PackageIdentifier);
        Assert.Equal("Mozilla Firefox", result.Data.Versions[0].DefaultLocale.PackageName);
    }

    [Fact]
    public async Task GetPackageIdForFirstMatchAsync_ReturnsExpectedResult()
    {
        // Arrange
        var httpClient = Substitute.For<HttpClient>();
        var logger = Substitute.For<ILogger<MicrosoftStoreClient>>();
        var client = new MicrosoftStoreClient(httpClient, logger);
        var cancellationToken = new CancellationToken();

        var expectedResponse = new HttpResponseMessage
        {
            Content = new StringContent(
                @"{
                ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchResponse, StoreEdgeFD"",
                ""Data"": [
                    {
                        ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchData, StoreEdgeFD"",
                        ""PackageIdentifier"": ""9NZVDKPMR9RD"",
                        ""PackageName"": ""Mozilla Firefox"",
                        ""Publisher"": ""Mozilla"",
                        ""Versions"": [
                            {
                                ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchVersion, StoreEdgeFD"",
                                ""PackageVersion"": ""Unknown"",
                                ""PackageFamilyNames"": [
                                    ""Mozilla.Firefox_n80bbvh6b1yt2""
                                ]
                            }
                        ]
                    }
                ]
            }", Encoding.UTF8, "application/json")
        };

        httpClient.SendAsync(Arg.Is<HttpRequestMessage>(req =>
            req.Method == HttpMethod.Post
            && req.RequestUri == new Uri("https://storeedgefd.dsx.mp.microsoft.com/v9.0/manifestSearch")), cancellationToken)
            .Returns(expectedResponse);

        // Act
        var result = await client.GetPackageIdForFirstMatchAsync("FireFox", cancellationToken);

        // Assert
        Assert.Equal("9NZVDKPMR9RD", result);
    }

    [Fact]
    public async Task Search_ReturnsExpectedResult()
    {
        // Arrange
        var httpClient = Substitute.For<HttpClient>();
        var logger = Substitute.For<ILogger<MicrosoftStoreClient>>();
        var client = new MicrosoftStoreClient(httpClient, logger);
        var cancellationToken = new CancellationToken();

        var expectedResponse = new HttpResponseMessage
        {
            Content = new StringContent(
                @"{
                ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchResponse, StoreEdgeFD"",
                ""Data"": [
                    {
                        ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchData, StoreEdgeFD"",
                        ""PackageIdentifier"": ""9NZVDKPMR9RD"",
                        ""PackageName"": ""Mozilla Firefox"",
                        ""Publisher"": ""Mozilla"",
                        ""Versions"": [
                            {
                                ""$type"": ""Microsoft.Marketplace.Storefront.StoreEdgeFD.BusinessLogic.Response.ManifestSearch.ManifestSearchVersion, StoreEdgeFD"",
                                ""PackageVersion"": ""Unknown"",
                                ""PackageFamilyNames"": [
                                    ""Mozilla.Firefox_n80bbvh6b1yt2""
                                ]
                            }
                        ]
                    }
                ]
            }", Encoding.UTF8, "application/json")
        };

        httpClient.SendAsync(Arg.Is<HttpRequestMessage>(req =>
            req.Method == HttpMethod.Post
            && req.RequestUri == new Uri("https://storeedgefd.dsx.mp.microsoft.com/v9.0/manifestSearch")), cancellationToken)
            .Returns(expectedResponse);

        // Act
        var result = await client.Search("FireFox", cancellationToken);

        // Assert
        Assert.NotNull(result);
        Assert.Equal("Mozilla Firefox", result?.Data.FirstOrDefault()?.PackageName);
        Assert.Equal("9NZVDKPMR9RD", result?.Data.FirstOrDefault()?.PackageIdentifier);
    }

}
